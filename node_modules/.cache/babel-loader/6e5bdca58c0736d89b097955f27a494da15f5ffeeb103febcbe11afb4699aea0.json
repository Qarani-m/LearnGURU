{"ast":null,"code":"var _jsxFileName = \"/Users/scott/Desktop/LearnGURU/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Routes, Route, useNavigate } from 'react-router-dom';\nimport Homepage from './Homepage/Homepage.js';\nimport CourseList from './courses/CourseList.js';\nimport CourseDetail from './courses/CourseDetail.js';\nimport LoginForm from './auth/LoginForm.js';\nimport InstructorLoginForm from './auth/InstructorLoginForm.js';\nimport SignupForm from './auth/SignupForm.js';\nimport NavBar from './NavBar.js';\nimport LearnGuruApi from './api/api.js';\nimport UserContext from './auth/UserContext.js';\nimport './App.css';\nimport ProfileForm from './Profile/ProfileForm.js';\nimport useLocalStorage from './hooks/useLocalStorage.js';\nimport jwt from \"jsonwebtoken\";\nimport InstructorBio from './Instructors/InstructorBio.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TOKEN_STORAGE_ID = 'learnguru-token';\nexport const ROLE_STORAGE_ID = 'learnguru-role';\nfunction App() {\n  _s();\n  const navigate = useNavigate();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [token, setToken] = useLocalStorage(TOKEN_STORAGE_ID, null);\n  console.log(TOKEN_STORAGE_ID);\n\n  // Load user info from API. Until a user is logged in and they have a token,\n  // this should not run. It only needs to re-run when a user logs out, so\n  // the value of the token is a dependency for this effect.\n\n  useEffect(function loadUserInfo() {\n    console.debug(\"App useEffect loadUserInfo\", \"token=\", token);\n    console.log(token);\n    async function getCurrentUser() {\n      if (token) {\n        try {\n          let {\n            username\n          } = jwt.decode(token);\n          let currentUser = await LearnGuruApi.getCurrentUser(username);\n          setCurrentUser(currentUser);\n        } catch (err) {\n          console.error(\"App loadUserInfo: problem loading\", err);\n          setCurrentUser(null);\n        }\n      }\n    }\n    getCurrentUser();\n  }, [token]);\n\n  // handles log out\n  function logout() {\n    setCurrentUser(null);\n    setToken(null);\n    localStorage.removeItem(\"learnguru-token\");\n    navigate(\"/login\");\n  }\n  ;\n\n  /* Handles site-wide signup.\n  *\n  * Automatically logs them in (set token) upon signup.\n  *\n  * Make sure you await this function and check its return value!\n  */\n  async function register(signupData) {\n    try {\n      let token = await LearnGuruApi.register(signupData);\n      setToken(token);\n      return {\n        success: true\n      };\n    } catch (errors) {\n      console.error(\"signup failed\", errors);\n      return {\n        success: false,\n        errors\n      };\n    }\n  }\n\n  /* Handles site-wide signup.\n  *\n  * Automatically logs them in (set token) upon signup.\n  *\n  * Make sure you await this function and check its return value!\n  */\n\n  async function login(loginData) {\n    try {\n      let token = await LearnGuruApi.login(loginData);\n      setToken(token);\n      return {\n        success: true\n      };\n    } catch (errors) {\n      console.error(\"login failed\", errors);\n      return {\n        success: false,\n        errors\n      };\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      currentUser,\n      setCurrentUser,\n      logout\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {\n        currentUser: currentUser,\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Homepage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/courses\",\n          element: /*#__PURE__*/_jsxDEV(CourseList, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/courses/:course_id\",\n          element: /*#__PURE__*/_jsxDEV(CourseDetail, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/instructors/:instructor_id\",\n          element: /*#__PURE__*/_jsxDEV(InstructorBio, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 62\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/users/:username\",\n          element: /*#__PURE__*/_jsxDEV(ProfileForm, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 51\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: /*#__PURE__*/_jsxDEV(LoginForm, {\n            login: login\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/instructorlogin\",\n          element: /*#__PURE__*/_jsxDEV(InstructorLoginForm, {\n            login: login\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 51\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/register\",\n          element: /*#__PURE__*/_jsxDEV(SignupForm, {\n            register: register\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"VqUUxkBjedb2tCTK79JV/F/ICBg=\", false, function () {\n  return [useNavigate, useLocalStorage];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Routes","Route","useNavigate","Homepage","CourseList","CourseDetail","LoginForm","InstructorLoginForm","SignupForm","NavBar","LearnGuruApi","UserContext","ProfileForm","useLocalStorage","jwt","InstructorBio","jsxDEV","_jsxDEV","TOKEN_STORAGE_ID","ROLE_STORAGE_ID","App","_s","navigate","currentUser","setCurrentUser","token","setToken","console","log","loadUserInfo","debug","getCurrentUser","username","decode","err","error","logout","localStorage","removeItem","register","signupData","success","errors","login","loginData","Provider","value","children","className","fileName","_jsxFileName","lineNumber","columnNumber","path","element","_c","$RefreshReg$"],"sources":["/Users/scott/Desktop/LearnGURU/src/App.js"],"sourcesContent":["import React, { useEffect, useState, } from 'react';\nimport { Routes, Route, useNavigate } from 'react-router-dom';\nimport Homepage from './Homepage/Homepage.js';\nimport CourseList from './courses/CourseList.js';\nimport CourseDetail from './courses/CourseDetail.js';\nimport LoginForm from './auth/LoginForm.js';\nimport InstructorLoginForm from './auth/InstructorLoginForm.js';\nimport SignupForm from './auth/SignupForm.js';\nimport NavBar from './NavBar.js';\nimport LearnGuruApi from './api/api.js';\nimport UserContext from './auth/UserContext.js';\nimport './App.css';\nimport ProfileForm from './Profile/ProfileForm.js';\n\nimport useLocalStorage from './hooks/useLocalStorage.js';\nimport jwt from \"jsonwebtoken\"\nimport InstructorBio from './Instructors/InstructorBio.js';\n\nexport const TOKEN_STORAGE_ID = 'learnguru-token';\nexport const ROLE_STORAGE_ID = 'learnguru-role';\n\n\n\nfunction App() {\n  const navigate = useNavigate();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [token, setToken] = useLocalStorage(TOKEN_STORAGE_ID, null);\n\n  console.log(TOKEN_STORAGE_ID);\n\n  // Load user info from API. Until a user is logged in and they have a token,\n  // this should not run. It only needs to re-run when a user logs out, so\n  // the value of the token is a dependency for this effect.\n\n  useEffect(function loadUserInfo() {\n    console.debug(\"App useEffect loadUserInfo\", \"token=\", token);\n    console.log(token);\n\n    async function getCurrentUser() {\n      if (token) {\n        try {\n          let { username } = jwt.decode(token);\n          let currentUser = await LearnGuruApi.getCurrentUser(username);\n          setCurrentUser(currentUser);\n\n        } catch (err) {\n          console.error(\"App loadUserInfo: problem loading\", err);\n          setCurrentUser(null);\n        }\n      }\n    }\n\n    getCurrentUser();\n  }, [token]);\n\n\n  // handles log out\n  function logout() {\n    setCurrentUser(null);\n    setToken(null);\n    localStorage.removeItem(\"learnguru-token\");\n    navigate(\"/login\");\n\n  };\n\n  /* Handles site-wide signup.\n  *\n  * Automatically logs them in (set token) upon signup.\n  *\n  * Make sure you await this function and check its return value!\n  */\n  async function register(signupData) {\n    try {\n      let token = await LearnGuruApi.register(signupData);\n      setToken(token);\n      return { success: true };\n    } catch (errors) {\n      console.error(\"signup failed\", errors);\n      return { success: false, errors };\n    }\n  }\n\n  /* Handles site-wide signup.\n *\n * Automatically logs them in (set token) upon signup.\n *\n * Make sure you await this function and check its return value!\n */\n\n  async function login(loginData) {\n    try {\n      let token = await LearnGuruApi.login(loginData);\n      setToken(token);\n      return { success: true };\n    } catch (errors) {\n      console.error(\"login failed\", errors);\n      return { success: false, errors };\n    }\n  }\n\n\n  return (\n    <UserContext.Provider value={{ currentUser, setCurrentUser, logout }}>\n      <div className=\"App\">\n\n        <NavBar currentUser={currentUser} logout={logout} />\n        <Routes>\n          <Route path=\"/\" element={<Homepage />}></Route>\n          <Route path=\"/courses\" element={<CourseList />}></Route>\n          <Route path=\"/courses/:course_id\" element={<CourseDetail />} />\n          <Route path=\"/instructors/:instructor_id\" element={<InstructorBio />} />\n          <Route path=\"/users/:username\" element={<ProfileForm />} />\n\n\n          <Route path=\"/login\" element={<LoginForm login={login} />}>\n          </Route>\n          <Route path=\"/instructorlogin\" element={<InstructorLoginForm login={login} />} />\n\n          <Route path=\"/register\" element={<SignupForm register={register} />}>\n          </Route>\n        </Routes>\n\n      </div>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}